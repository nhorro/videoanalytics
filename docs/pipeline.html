

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>The pipeline paradigm &mdash; videoanalytics 0.0.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sources" href="sources.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> videoanalytics
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The pipeline paradigm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#component-organisation">Component organisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-videoanalytics.pipeline">API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="sinks.html">Sinks</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_detection.html">Object detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_tracking.html">Object tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="roi.html">Working with ROIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background substraction and motion estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="devnotes.html">Development notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References and useful resources</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">videoanalytics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>The pipeline paradigm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/pipeline.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-pipeline-paradigm">
<h1>The pipeline paradigm<a class="headerlink" href="#the-pipeline-paradigm" title="Permalink to this headline">¶</a></h1>
<p>The pipeline module contains the building blocks for implementing the pipeline paradigm.
This implementation defines two concepts:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Sources</strong>: components that acquire data from a device such as a camera or file.</p></li>
<li><p><strong>Sinks</strong>: components that process previously generated data. Their output can be additional information  available to other component or an action, as publishing data to a DB or communication middleware.</p></li>
</ul>
</div></blockquote>
<p>Pipelines are chained components that perform succesive steps in order to obtain a final product.
Each pipeline is composed of <strong>only one source</strong> of information and one or more <strong>sinks</strong> that
perform operations.</p>
<p>Pipelines are not restricted to video frames, but to keep things simple we will be assuming that
each unit of information is a video frame.</p>
<p><a class="reference internal" href="#fig-pipeline"><span class="std std-numref">Fig. 1</span></a> shows the executed model for an example pipeline that tracks objects and
performs some kind of activity classification based on their trajectories.</p>
<div class="align-center figure" id="id1">
<span id="fig-pipeline"></span><img alt="_images/pipeline.png" src="_images/pipeline.png" />
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">Example of a pipeline. Dashed arrows indicate dependencies and solid arrows indicate read
and write access to the shared context.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Notice that the pipeline is defined as a <a class="reference external" href="https://en.wikipedia.org/wiki/Directed_acyclic_graph/">directed acyclic graph</a> but it is executed in a
sequential order one component at a time. The sequence to grant that dependencies are met is obtained using the
<a class="reference external" href="https://en.wikipedia.org/wiki/Topological_sorting/">topological sorting</a> algorithm.</p>
<p>Another aspect to consider is that there is no direct communication between components, as data is shared
through a <em>global context</em> that is passed by reference to each component during initialization.</p>
<p>This decision is inspired in the <a class="reference external" href="https://en.wikipedia.org/wiki/Blackboard_(design_pattern)/">blackboard design pattern</a>
as it reduces the complexity of defining specific interfaces. Also, all data is shared in standard python
and scipy data types such as dictionaries and numpy arrays.
Each component declares in its API which variables it needs and which variables it creates and/or updates.
Note that while this might be convenient for prototyping, it might not be an optimal solution for
a production pipeline.</p>
<p>Together with model performance evaluation, processing time and CPU and resource consumption are
relevant for the selection of a suitable algorithm.</p>
<p>The execution of a pipeline automatically measures the initial and end time for each iteration and stores
some statistics such as best and worst cases, and average processing time. Callbacks are provided for
more specific metrics such as memory consumption, that heavily depend on the underlying implementation of
each component.</p>
<div class="section" id="component-organisation">
<h2>Component organisation<a class="headerlink" href="#component-organisation" title="Permalink to this headline">¶</a></h2>
<p>The library proposes the division of components in the aforementioned categories: sources and sinks.
These categories can then be furtherly grouped in components for more specific tasks or domains:</p>
<blockquote>
<div><ul class="simple">
<li><p>Background substraction an motion estimation.</p></li>
<li><p>Object detection.</p></li>
<li><p>Object tracking.</p></li>
<li><p>Visualization/anotation.</p></li>
<li><p>Domain/application-specific.</p></li>
</ul>
</div></blockquote>
<p>Thus, the different components inherit the core Source and Sink abstract classes in the pipeline
module and are mantained in children modules as indicated in <a class="reference internal" href="#fig-package"><span class="std std-numref">Fig. 2</span></a>.</p>
<div class="align-center figure align-default" id="id2">
<span id="fig-package"></span><img alt="_images/package.png" src="_images/package.png" />
<p class="caption"><span class="caption-number">Fig. 2 </span><span class="caption-text">Example of module organisation</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="module-videoanalytics.pipeline">
<span id="api-reference"></span><h2>API reference<a class="headerlink" href="#module-videoanalytics.pipeline" title="Permalink to this headline">¶</a></h2>
<p>Base classes for the pipeline paradigm.</p>
<dl class="py class">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">videoanalytics.pipeline.</span></span><span class="sig-name descname"><span class="pre">Sink</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Default constructor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.enable_display">
<span class="sig-name descname"><span class="pre">enable_display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.enable_display" title="Permalink to this definition">¶</a></dt>
<dd><p>Set/unset display output (does not necesarily apply to all components).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"> <span class="pre">=</span> <span class="pre">''</span></em><a class="headerlink" href="#videoanalytics.pipeline.Sink.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A sink.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.process">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.process" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called for each active component in the pipeline.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.setup">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after all components from the pipeline are instanced.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.shutdown">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after the process finished.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Sink.toggle_display_enable">
<span class="sig-name descname"><span class="pre">toggle_display_enable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Sink.toggle_display_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle display output (does not necesarily apply to all components).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">videoanalytics.pipeline.</span></span><span class="sig-name descname"><span class="pre">Source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Source" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Source.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Default constructor.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"> <span class="pre">=</span> <span class="pre">''</span></em><a class="headerlink" href="#videoanalytics.pipeline.Source.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A source.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source.read">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Source.read" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called until it returns None or the processing is cancelled.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source.setup">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Source.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after all components from the pipeline are instanced.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="videoanalytics.pipeline.Source.shutdown">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#videoanalytics.pipeline.Source.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called after the process finished.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sources.html" class="btn btn-neutral float-right" title="Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Nicolás Eduardo Horro.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>